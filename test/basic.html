<!doctype html>
<html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
	<title>cosmoz-grouped-list basic test</title>

	<script src="../../web-component-tester/browser.js"></script>
	<script src="../../webcomponentsjs/webcomponents-lite.js"></script>

	<link rel="import" href="../cosmoz-grouped-list.html">
</head>
<body>
	<test-fixture id="cosmoz-grouped-list-fixture">
		<template>
			<cosmoz-grouped-list>
				<cosmoz-grouped-list-template id="itemTemplate">
					<template>
						<div class="item-template" style="border-bottom: 1px solid grey;">
							<div>
								ID:<span class="item-id">{{ item.id }}</span>
								NAME:<span class="item-name">{{ item.name }}</span>
								VALUE:<span class="item-value">{{ item.value }}</span>
								<div>
						</div>
					</template>
				</cosmoz-grouped-list-template>
				<cosmoz-grouped-list-template id="groupTemplate">
					<template>
						<div class="group-template">
							NAME:<span class="item-name">{{ item.name }}</span>
							VALUE: <span class="item-value">{{ item.value }}</span>
							SELECTED: <span class="item-selected">{{ selected }}</span>
						<div>
					</template>
				</cosmoz-grouped-list-template>
			</cosmoz-grouped-list>
		</template>
	</test-fixture>

	<script>
	(function () {
		'use strict';

		suite('<cosmoz-grouped-list>', function () {
			var element
			, items;

			setup(function (done) {
				element = fixture('cosmoz-grouped-list-fixture');
				items = [
					{
						name	: 'Group 0',
						id		: 'g0',
						items	: [
							{
								id		: 'g0-0',
								name	: 'Group 0 item 0',
								value : 0
							},
							{
								id			: 'g0-1',
								name		: 'Group 0 item 1',
								value   : 1
							}
						]
					},
					{
						name	: 'Group 1',
						id		: 'g1',
						items	: [
							{
								id		: 'g1-0',
								name	: 'Group 1 item 0',
								value : 0
							},
							{
								id			: 'g1-1',
								name		: 'Group 1 item 1',
								value   : 1
							}
						]
					},
					{
						name: 'Element 1',
						id: 'e1'
					}
				];
				element.data = items;
				setTimeout(function () {
					done();
				}, 10);
			});

			test('instantiates a cosmoz-grouped-list element', function () {
				assert.equal(element.is, 'cosmoz-grouped-list');
				assert.isTrue(element.hasRenderedData);
			});

			test('first item is a group', function () {
				assert.isTrue(element.isGroup(items[0]));
				assert.isTrue(element.isGroup(items[1]));
				assert.isFalse(element.isGroup(items[2]));
			});

			test('item belongs to group', function () {
				assert.equal(element.getItemGroup(items[0].items[0]), items[0]);
				assert.equal(element.getItemGroup(items[0].items[1]), items[0]);

				assert.equal(element.getItemGroup(items[1].items[0]), items[1]);
				assert.equal(element.getItemGroup(items[1].items[1]), items[1]);
				assert.isNull(element.getItemGroup(items[2]));
			});

			test('selects an item', function () {
				element.selectItem(items[0]);
				flush(function (done) {
					expect(element.selectItems[0]).to.equal(items[0]);
					done();
				});
			});

			// test('selects all items', function () {
			// 	element.selectAllItems();
			// 	flush(function (done) {
			// 		expect(element.selectItems[0]).to.equal(items[1]);
			// 		done();
			// 	});
			// });



		});
	}());

	</script>
</body>
</html>
