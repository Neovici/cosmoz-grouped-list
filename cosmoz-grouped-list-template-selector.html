<link rel="import" href="../polymer/polymer.html"/>
<!--
@demo demo/full.html Full Demo
-->
<dom-module id="cosmoz-grouped-list-template-selector">
	<template>
		<style>
			:host ::slotted([hidden]) {
				display: none !important;
			}
		</style>
		<slot></slot>
	</template>
	<script>
		'use strict';
		Polymer({
			is: 'cosmoz-grouped-list-template-selector',
			properties: {
				index: {
					type: Number
				},
				item: {
					type: Object,
					observer: '_onItemChanged'
				},
				hidden: {
					type: Boolean,
					observer: '_onHiddenChanged'
				},
			},

			detached() {
				this._fireChange({hidden: true});
			},

			_onItemChanged(item) {
				const {index, hidden} = this;

				if (item == null || hidden) {
					return;
				}
				this._fireChange({index, item});

			},
			_onHiddenChanged(hidden) {
				const {index, item} = this;
				this._fireChange({index, hidden, item});
			},

			_fireChange(props = {}) {
				this.fire('cosmoz-selector-changed', Object.assign({
					selector: this,
				}, props));
			}

		});
	</script>
</dom-module>
